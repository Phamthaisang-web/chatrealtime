<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Full Screen Realtime Chat</title>
  <style>
    * {
      box-sizing: border-box;
    }

    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      font-family: "Segoe UI", sans-serif;
      background: #f0f2f5;
    }

    .chat-wrapper {
      display: flex;
      flex-direction: column;
      height: 100vh;
    }

    .chat-header {
      background: #0084ff;
      color: white;
      padding: 16px;
      font-size: 20px;
      font-weight: bold;
      text-align: center;
    }

    .chat-join {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      flex: 1;
      gap: 10px;
    }

    .chat-join input {
      padding: 12px;
      border-radius: 24px;
      border: 1px solid #ccc;
      width: 300px;
      font-size: 16px;
    }

    .chat-join button {
      padding: 12px 24px;
      border: none;
      background: #0084ff;
      color: white;
      font-size: 16px;
      border-radius: 24px;
      cursor: pointer;
    }

    .chat-main {
      flex: 1;
      display: flex;
      flex-direction: column;
      padding: 16px;
      overflow-y: auto;
      background: #e5ddd5;
    }

    .message {
      max-width: 60%;
      padding: 10px 16px;
      border-radius: 18px;
      margin-bottom: 10px;
      word-wrap: break-word;
      position: relative;
    }

    .message.left {
      background: #fff;
      align-self: flex-start;
      border-bottom-left-radius: 0;
    }

    .message.right {
      background: #dcf8c6;
      align-self: flex-end;
      border-bottom-right-radius: 0;
    }

    .system-message {
      text-align: center;
      font-size: 0.9em;
      color: gray;
      margin: 10px 0;
    }

    .chat-input {
      display: flex;
      padding: 12px;
      background: #f0f0f0;
      border-top: 1px solid #ddd;
    }

    .chat-input input {
      flex: 1;
      padding: 12px;
      border: 1px solid #ccc;
      border-radius: 24px;
      font-size: 16px;
      margin-right: 10px;
    }

    .chat-input button {
      padding: 12px 20px;
      background: #0084ff;
      border: none;
      color: white;
      font-size: 16px;
      border-radius: 24px;
      cursor: pointer;
    }

    .hidden {
      display: none !important;
    }
  </style>
</head>
<body>
  <div class="chat-wrapper">
    <div class="chat-header">ðŸ’¬ Fullscreen Chat</div>

    <div class="chat-join" id="join-section">
      <input id="username" placeholder="Enter your name..." />
      <button onclick="connect()">Join Chat</button>
    </div>

    <div class="chat-main hidden" id="messages"></div>

    <div class="chat-input hidden" id="chat-input">
      <input id="message" placeholder="Type your message..." />
      <button onclick="send()">Send</button>
    </div>
  </div>

  <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
  <script>
    let socket;
    let currentUser = "";

    function connect() {
      const username = document.getElementById("username").value.trim();
      if (!username) return alert("Please enter your name");

      currentUser = username;
      socket = io("http://localhost:8080");

      socket.on("connect", () => {
        socket.emit("join", username);
        document.getElementById("join-section").classList.add("hidden");
        document.getElementById("messages").classList.remove("hidden");
        document.getElementById("chat-input").classList.remove("hidden");
      });

      socket.on("chat message", (msg) => {
        const div = document.createElement("div");
        div.classList.add("message");
        div.classList.add(msg.user === currentUser ? "right" : "left");
        div.textContent = `${msg.user}: ${msg.text}`;
        document.getElementById("messages").appendChild(div);
        scrollToBottom();
      });

      socket.on("system", (msg) => {
        const div = document.createElement("div");
        div.classList.add("system-message");
        div.textContent = `ðŸŸ¢ ${msg}`;
        document.getElementById("messages").appendChild(div);
        scrollToBottom();
      });
    }

    function send() {
      const input = document.getElementById("message");
      const message = input.value.trim();
      if (!message) return;
      socket.emit("chat message", message);
      input.value = "";
    }

    function scrollToBottom() {
      const container = document.getElementById("messages");
      container.scrollTop = container.scrollHeight;
    }
  </script>
</body>
</html>
